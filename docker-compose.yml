version: "3.9"
services:
  jellyfin:
    image: jellyfin/jellyfin
    container_name: jellyfin
    environment:
      - PUID=1000
      - PGID=1000
      - VERSION=docker
    group_add:
      - "989"
    network_mode: host
    volumes:
      - /mnt/media/jellyfin/config:/config
      - /mnt/media/jellyfin/cache:/cache
      - /mnt/media:/media
    devices:
      - /dev/dri/renderD128:/dev/dri/renderD128
      - /dev/dri/card0:/dev/dri/card0
    restart: unless-stopped

  iron-cake:
    container_name: iron-cake
    build: ./iron-cake
    ports:
      - "8000:8000"
    volumes:
      - /mnt/media/anime:/anime
      - /mnt/media/movies:/movies
      - /mnt/media/series:/series
      - /mnt/media/music:/music
      - ~/.local/share/iron-cake-thumb:/thumb
      - ~/.local/share/wallpapers:/walls
      - ~/share:/share
    restart: unless-stopped

  jbb:
    container_name: jbb
    build: ./jbb.py
    volumes:
      - ./jbb.py/db:/db
      - ./jbb.py/media:/media
      - ./jbb.py/music:/music
    restart: unless-stopped

  merossd:
    container_name: merossd
    build: ./merossd
    ports:
      - "4200:4200"
    restart: unless-stopped

  radicale:
    container_name: radicale
    build: ./radicale
    ports:
      - "5232:5232"
    volumes:
      - ~/.local/share/radicale:/radicale
      - ~/.gitconfig:/etc/gitconfig
    restart: unless-stopped

  rss-bridge:
    container_name: rss-bridge
    image: rssbridge/rss-bridge:latest
    volumes:
      - ./rss-bridge:/config
    ports:
      - "3000:80"
    restart: unless-stopped
